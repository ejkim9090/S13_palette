# 문구 및 생활용품 판매 사이트 - Palette (개인 프로젝트)
![image](https://user-images.githubusercontent.com/107298972/215389085-9ee29b0d-96dd-405e-a003-a944af839c51.png)


## 수행 기간
2022년 11월 29일~2023년 01월 03일


## 개발 목표
깔끔한 UI와 크롤링한 데이터를 활용하여, 문구 및 생활용품을 유형별로 조회하고, 상품 찜하기 및 후기를 작성할 수 있는 웹 페이지 구현


## 개발 환경
* OS : Windows 10
* Language : Java(JDK 11.0.2), HTML5, CSS3, Javascript
* Server : Apache Tomcat 9.0
* DBMS : Oracle XE 11.2
* IDE	: Eclipse 2020-09, sqldeveloper
* Framework / Library	: Ajax, jQuery 3.6.1, ojdbc6, gson 2.8.6, jstl 1.2
* Open API : Selenium, commons-fileupload-1.3.3, Kakao 주소 API
* Prototyping Tool : Kakao Oven
* ERD Tool : ERD Cloud


## 구현 기능
* 로그인 및 회원가입
    - 유효성 체크
    - 카카오 주소 API
* 마이페이지
    - 찜 목록 조회, 찜 삭제
    - 작성한 후기 목록 조회
* 카테고리페이지
    - 카테고리 소분류, 대분류별 상품 조회
    - 필터링된 상품 조회, 정렬기준별 상품 조회
* 상품상세페이지
    - 찜 등록, 찜 해제
    - 상품 후기 목록 조회, 상품 후기 작성


## 프로젝트 내용
* __메인페이지__

![image](https://user-images.githubusercontent.com/107298972/215392769-9be3286d-228d-476b-a1d6-d76dd4c3d71b.png)

<화면 설명>

로그인 여부에 따라 우측 상단 메뉴가 다르게 출력된다.

카테고리 버튼에 hover 시 색상 변경 및 드롭다운 메뉴가 표시된다.

중앙의 이미지는 스와이퍼를 사용하여 일정 시간이 지나면 다음 이미지로 바뀐다.


<구현 방법>

미로그인 상태에서는 우측 맨 상단에 로그인, 회원가입이 출력되고, 로그인 상태에서는 유저명과 로그아웃 버튼이 출력되도록 하였다. (JSTL 태그 choose, when, otherwise 사용)

우측 상단의 유저명을 클릭하면 마이페이지로, 로그아웃 클릭시 로그아웃 되도록, 그리고 하트 버튼 클릭시 마이페이지 찜한 목록으로 이동하도록 구현하였다.
카테고리 드롭다운 메뉴에서 특정 카테고리를 클릭하면 해당 카테고리페이지로 이동한다.


---

* __회원가입페이지__

![image](https://user-images.githubusercontent.com/107298972/215393534-00e0b9e3-923a-418d-a0b3-a96164d637ff.png)
<img src="https://user-images.githubusercontent.com/107298972/215395650-78275719-66ab-4700-aed4-264340c7bc13.png"  width="450" height="500"/>

<화면 설명>

각 입력란에 입력시 상황에 따라 유효성 검사 및 하단에 안내문 출력.

주소 검색 버튼 클릭시 카카오 주소 API 창 출력, 주소 선택시 입력란에 자동 입력된다.

이용약관동의 전체 동의 체크시 일괄 체크된다.

<구현 방법>

form 태그를 사용하여 입력사항을 컨트롤러로 넘겨주었다. 
 
주소 검색시 카카오 API 주소 검색 모달창이 출력되어 주소를 자동으로 입력받았다. 첫 번째 주소란은 readonly 속성을 부여하여 API로부터만 입력받을 수 있게 하였고, 두 번째 주소란에는 상세주소를 직접 입력할 수 있게 하였다.
 
이용약관동의에서 체크박스들의 체크사항에 대해 비트마스킹 기법을 사용하였다. 필수사항을 제외한 선택사항 3개에 한해서 value를 1, 2 ,4로 지정했고, Javascript로 체크된 value를 더하여 컨트롤러로 전달하였다.

---

* __마이페이지 -  상품 후기 목록__

![image](https://user-images.githubusercontent.com/107298972/215396441-6ad99c67-b199-450b-8af4-c5c2ee30a868.png)


<화면 설명>

(마이페이지 -  찜한 상품 목록 페이지도 있지만, 두 페이지의 구조가 유사하여 생략하였다.)

작성한 후기 목록이 출력되고, 각 후기의 첨부파일 이미지도 함께 보여진다. 

삭제 버튼 클릭시 후기가 삭제된다.

한 페이지에 4개의 후기가 출력되고, 이전/다음 버튼이 상황에 따라 활성화/비활성화된다.

<구현 방법>

상단에 유저 이름이 출력된다.

삭제 버튼 클릭시 ajax로 해당 후기 번호를 전달한다. 삭제 성공 여부에 따라 alert 메세지를 출력한다.

상품 이미지나 상품명을 클릭하면 해당 상품의 상세페이지로 이동한다.

한 페이지에 4개의 후기가 출력된다. 목록 하단의 이전/다음 버튼이 상황에 따라 활성화/비활성화된다. JSTL태그 choose, when, otherwise를 사용하여 이전/다음페이지가 없는 경우 disabled 속성을 부여하였다. 

---

* __카테고리페이지__

![image](https://user-images.githubusercontent.com/107298972/215396852-c1c222fe-7035-4c35-b2cd-82503c18df82.png)


<화면 설명>

상단에 대분류명과 그의 소분류명들이 있고, 소분류명 클릭시 해당 상품목록이 출력된다.

좌측의 필터에서 옵션 체크시 필터링된 상품목록 출력. (정렬사항 유지)

우측 낮은가격순/높은가격순 버튼 클릭시 정렬되어 상품목록 출력. (필터 체크사항 유지)

<구현 방법>

좌측 필터에서 각 옵션의 value를 0, 1, 2, 3, 4로 넘겨주었고, 컨트롤러에서 switch문을 사용하여 startprice, endprice를 지정해주었다. (default는 0) 

이 페이지의 컨트롤러에서 파마리터를 통해 Dao로 넘겨야 할 값은 총 5개였다. (카테고리아이디, 필터-배송, startprice, endprice, 정렬기준) 
 
Dao에서 처리해야 할 조건들이 많았기 때문에, 기본 sql을 작성해놓고, 옵션 유무에 따라 where절에 이어서 조건이 붙도록 작성하였다. (if문, switch문 사용)


---

* __상품상세페이지__

![image](https://user-images.githubusercontent.com/107298972/215397136-209446e8-f6a1-4683-b2a7-205b38e5078c.png)

<화면 설명>

상품이미지, 상품명, 상품가격 등 상품의 정보가 출력된다.

미로그인 상태에서 찜버튼 클릭시 alert창 안내 후 로그인페이지로 이동한다.

찜 등록/해제 시 버튼 이미지가 변경되고, 마이페이지-찜한상품에도 추가/삭제된다.

<구현 방법>

ajax로 찜 기능을 구현하였다. 우선 윈도우가 로드가 되면, 찜한 상태에 따라서 하트이미지가 다르게 보이도록 하였다.
버튼 클릭 시 데이터를 컨트롤러로 보내서, 찜한 상태였다면 delete를, 찜하지 않은 상태였다면 insert를 하도록 하였다. 
그래서 이 결과를 다시 ajax에서 받고, success시에 이미지가 바뀌도록 구현하였다.

---

* __상품상세페이지 - 후기 목록__

<img src="https://user-images.githubusercontent.com/107298972/215397535-4fa80fd6-5f77-4520-a689-683bca1bb04d.png"  width="450" height="500"/>
<img src="https://user-images.githubusercontent.com/107298972/215397602-06b9b5a7-7775-42be-bb5c-b837c7d89a47.png"  width="450" height="350"/>

<화면 설명>

(후기 없을 시의 화면을 별도로 구현하였다)

상품 후기 목록이 출력되고, 각 후기의 첨부파일 이미지도 함께 보여진다. 

사진 더보기 버튼 클릭시 아래의 사진 후기 전체보기 모달창이 열린다.

<구현 방법>

각 후기에 맞는 사진을 가져오게 하는 작업은 Service에서 이루어졌다. 후기Dao와 후기이미지Dao 이렇게 두 개를 생성해서, 
해당되는 후기번호의 이미지만 가져올 수 있도록 하였다.

목록에서, 유저 이름의 첫번째 글자만 남기고 **로 익명처리하고, 후기 작성 날짜를 20XX.XX.XX 형태로 출력하였다. 이는 Dao의 sql문에서 컬럼들을 가공하여 가져온 것이다. (RPAD, SUBSTRING, TO_CHAR 등 사용)

후기 사진 더보기 기능은, 매개인자로 '상품아이디'를 보내서 해당 상품에 대한 리뷰 사진만 가져오는 방식으로 구현하였다. 
우측 상단의 X버튼 클릭시 창이 닫힌다.

---

* __상품상세페이지 - 후기 작성__

<img src="https://user-images.githubusercontent.com/107298972/215397821-9bac9e88-88f8-463e-ae3c-f20d3cc9c01f.png"  width="500" height="350"/>

<화면 설명>

미로그인 상태에서 후기 작성 버튼 클릭시 alert창 안내 후 로그인페이지로 이동한다.

내용 작성, 사진첨부(최대 5장) 가능

사진 첨부시 선택한 사진 미리보기(썸네일)가 출력된다.

후기 등록시 상품상세페이지-후기목록에 추가, 마이페이지-작성한후기목록에 추가

<구현 방법>

파일 업로드는 다중 업로드가 지원되는 commons.fileupload 라이브러리를 사용했다.

그리고 첨부파일을 선택 시, 첨부파일의 최대 개수를 제한하고, 이미지를 미리보기(썸네일)할 수 있는 기능을 구현하였다. 파일을 입력받는 <input> 태그에, onchange 이벤트를 걸어주고, Javascript로 해당 기능을 구현하였다.

후기를 insert를 할 때, 이미지도 함께 저장되도록 했다. Dao의 sql문에서 insert all을 사용하여, review테이블과 review_image테이블에 동일한 후기번호로 insert가 되도록 하였다.


## ERD

![SEMI최종](https://user-images.githubusercontent.com/107298972/215398915-6a9f1c87-e4a8-4851-b09f-b5167d59dc08.png)



## 발표 자료
[발표 자료 보러 가기](https://github.com/sun2598/S13_palette/blob/main/Palette.pdf)













